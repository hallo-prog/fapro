{{ restore('viewedQuestions') }}
{% for k, context in offer.inquiry.context %}
    {% if context['questions'][question.id]['answer'] is defined and question.protocol != 'q' and question.protocol != 'p' %}
        <tr>
            <td class="pt-4" style="width:40%;border: none !important;">
                <p class="m-0 p-0" style="vertical-align:top;font-size:12px;font-weight: bold;">
                    <strong class="m-0 p-0" style="vertical-align:top;color: {{ sfColorDark }};">{{ question.title ? question.title : question.name }}</strong>
                </p>
            </td>
{#            <td class="pt-4" style="width:40%;border: none !important;border-right: 1px solid #d7d7d7 !important;">#}
{#                {% if context['questions'][question.id]['answer'] is defined %}#}
{#                    <div class="ml-3">#}
{#                    {% include 'offer/types/rows/'~question.answerType~'.html.twig' with {'col1':6,'col2':6, 'aid': question.questionArea ?question.questionArea.id: 0} %}#}
{#                    </div>#}
{#                {% endif %}#}
{#            </td>#}
            <td class="pt-4" style="width:200px;border: none !important;border-right: 1px solid #d7d7d7 !important;">
                {%- if context['questions'][question.id]['monteur']['text'] is defined %}{{ context['questions'][question.id]['monteur']['text'] }}{% endif -%}
            </td>
        </tr>
        {% set viewedQuestions = viewedQuestions|merge([question.id]) %}
        {% if question.needImage == true %}
        <tr>
            <td colspan="2" style="border: none !important" class="text-right l-4">
                {% if question.images|length %}
                {% for img in offer.images %}
                    {% if img.question and img.question.id == question.id %}
                    {% include 'offer/protocol_pdf/components/img_box.html.twig' with {'img':img, 'imagesCount': imagesCount, 'question': question} %}
                    {% set imagesCount = imagesCount+1 %}
                    {% endif %}
                {% endfor %}
                {% endif %}
            </td>
{#            <td style="width:200px;background-color: #fafafa;border: none !important;border-left: 1px solid #d7d7d7 !important;"></td>#}
        </tr>
        {% endif %}
    {% elseif question.id not in viewedQuestions and question.protocol == 'p' %}
        {% set viewedQuestions = viewedQuestions|merge([question.id]) %}
        <tr>
            <td class="pt-4" style="width:40%;border: none !important;">
                <p class="m-0 p-0" style="vertical-align:top;font-size:12px;font-weight: bold;">
                    <strong class="m-0 p-0" style="vertical-align:top;color: {{ sfColorDark }};">{{ question.title ? question.title : question.name }}</strong>
                </p>
            </td>
{#            <td class="pt-4" style="width:40%;border: none !important;border-right: 1px solid #d7d7d7 !important;"></td>#}
            <td class="pt-4" style="width:200px;border: none !important;border-right: 1px solid #d7d7d7 !important;"></td>
        </tr>
        {% if question.needImage == true %}
            <tr>
                <td colspan="2" style="border: none !important" class="text-right l-4">
                    {% if question.images|length %}
                        {% for img in offer.images %}
                            {% if img.question and img.question.id == question.id %}
                                {% include 'offer/protocol_pdf/components/img_box.html.twig' with {'img':img, 'imagesCount': imagesCount, 'question': question} %}
                                {% set imagesCount = imagesCount+1 %}
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </td>
                {#            <td style="width:200px;background-color: #fafafa;border: none !important;border-left: 1px solid #d7d7d7 !important;"></td>#}
            </tr>
         {% endif %}
    {% endif %}
{% endfor %}
{{ save('viewedQuestions') }}