{{ restore('appAnswerChecked') }}

<label for="lq-{{ question.id }}" class="funnel{{ question.funnelEnd ? 'End' : 'Start' }} col-form-label">
    <select id="lq-{{ question.id }}" title="{{ question.name }}" data-class="s-{{ question.id }}"
            data-question="{{ question.id }}"
            data-help-dependencies="{% for answer in question.offerAnswers %}
{%- if answer.helptext %}{{ answer.id }}{% if loop.index != question.offerAnswers|length %}-{% endif %}{% endif %}
{% endfor %}" data-dependencies="{% for answer in question.offerAnswers -%}
{%- if answer.dependencies is not null %}
{{ answer.dependencies|join('-') }}
{% set appAnswerChecked = appAnswerChecked|merge(answer.dependencies) %}
{% endif %}
{% endfor %}" name="offer_option[{{ question.id }}]" class="answer_content form-control condition-change-check">
        {% for product in question.productSelectSubCategory.products %}
            {% set selected = (context and context[aid] is defined
                and context[aid]['questions'][question.id]['answer'] is defined
                and context[aid]['questions'][question.id]['answer']['name'] is defined
                and context[aid]['questions'][question.id]['answer']['name'] == product.id) ? true : false %}
            {% if loop.index == 1 %}
                <option {{ selected ? 'selected' : '' }} value="">{{ 'w.no'|trans }}</option>
            {% endif %}
            <option {{ selected ? 'selected' : '' }}
                    data-questions="{% for answer in question.offerAnswers -%}{% if answer.dependencies|length %}{{ answer.dependencies|join(':') }}{% endif %}{% endfor %}"
                    value="{{ product.id }}">{{ product.name }} ({{ product.kw }} {{ product.valueName }})
                | {{ product.description }}</option>
        {% endfor %}
    </select>
</label>
{{ save('appAnswerChecked') }}