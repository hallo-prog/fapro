<div class="card-body p-2" {% if question.needImage %}{{ stimulus_controller('upload', {'offerId':offer.id, 'question':question.id, 'imgCount':(question.images|length+1)}) }}{% endif %}>
    <div class="row mb-3 radios px-4">
        <div class="py-2 pl-0 pr-2 col-xs-6 col-sm-6 col-md-3">
            <p class="mb-0"
               style="font-size: inherit; font-weight: bold; color: {{ sfColorDark }}">{{ question.title ? question.title : question.name }}</p>
        </div>
        <div class="py-2 px-0 col-xs-6 col-sm-6 col-md-2">
            {% if context['questions'][question.id]['answer'] is defined %}
                {% include 'offer/types/rows/'~question.answerType~'.html.twig' with {'col1':6,'col2':6, 'aid': question.questionArea ?question.questionArea.id: 0} %}
            {%- else -%}
                -
            {%- endif -%}
        </div>
        <div class="p-2 col-md-1 text-center">
            {% if context['questions'][question.id]['answer'] is defined %}
            <label class="click-arrow" style="cursor: pointer;width: 20px;vertical-align: middle" data-from="answer_from-{{ question.id }}" data-to="module_context_text_{{ question.id }}" >
                <span class="d-none d-md-block d-lg-block d-xl-block material-icons" style="font-size: 40px !important;">keyboard_double_arrow_right</span>
                <span class="d-block d-md-none d-lg-none d-xl-none material-icons" style="font-size: 40px !important;">keyboard_double_arrow_down</span>
            </label><input style="height: 0;width: 0" class="module_context_change" type="radio" data-offerid="{{ offer.id }}"
                           data-id="{{ question.id }}" name="module_context[{{ question.id }}][ok]"
                           id="module_context_ok_{{ question.id }}" value="1">
            {%- endif -%}
        </div>
        <div class="col-md-4 p-0">
            <textarea style="resize: initial;" data-id="{{ question.id }}"
                      class="form-control module_contexttext_change"
                      id="module_context_text_{{ question.id }}"
                      name="module_context[{{ question.id }}][text]">
                {%- if context['questions'][question.id]['monteur']['text'] is defined %}{{ context['questions'][question.id]['monteur']['text'] }}{% endif -%}
            </textarea>
        </div>
        {% if question.needImage %}
            <div class="col-6 col-md-1">
                <h4 style="color: {{ sfColor }}">
                    <input type="file" multiple class="d-none" name="image[{{ question.id }}][]"
                           data-url="{{ path('ajax_upload_images', {'id':offer.id, 'question': question.id}) }}"
                           data-upload-target="fileclick"
                           accept="image/*" {{ stimulus_action('upload','addImagePreview','change') }}>
                    <button class="btn btn-light btn-sm p-1"
                            type="button" {{ stimulus_action('upload','clickImage','click') }}>
                        <span class="material-icons">add_a_photo</span> {# <span title="{{ 'm.imageAdd'|trans }}" class="material-icons">add_circle_outline</span> #}
                    </button>
                </h4>
            </div>
        {% else %}
            <div class="col-6 col-md-1"></div>
        {% endif %}
        <div class="pl-0 col-6 col-md-1 text-right">
            <label class="btn btn-sm" style="{% if context['questions'][question.id]['monteur']['ok'] is not defined or (context['questions'][question.id]['monteur']['ok'] is defined and context['questions'][question.id]['monteur']['ok'] != '1') %}{% else %}background-color:yellowgreen;color:#fff;{% endif %}cursor: pointer;" for="module_context_ok_{{ question.id }}">
                <span class="material-icons module_context_b1_{{ question.id }}">thumb_up{% if context['questions'][question.id]['monteur']['ok'] is not defined or (context['questions'][question.id]['monteur']['ok'] is defined and context['questions'][question.id]['monteur']['ok'] != '1') %}_off_alt{% else %}{% endif %}</span>
            </label>
            <input style="height: 0;width: 0" class="module_context_change" type="radio"
                   data-offerid="{{ offer.id }}"
                   data-id="{{ question.id }}"
                   name="module_context[{{ question.id }}][ok]"
                   id="module_context_ok_{{ question.id }}" value="1">
        </div>
    </div>
    {% if question.needImage %}
        <div class="row mb-3 radios" data-upload-target="preview">
            {% for img in offer.images %}
                {% if img.question and img.question.id == question.id %}
                    {% set i = loop.index-1 %}
                    {% include 'offer/montage/components/img_box.html.twig' with {'img':img, 'imagesCount': imagesCount, 'question': question} %}
                    {% set imagesCount = imagesCount+1 %}
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}
</div>